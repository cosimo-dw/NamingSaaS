<%= render 'shared/error_messages', object: f.object %>

<%= f.hidden_field :product_id, :value => @product.id %>
<%= f.fields_for :product_attribute_values do |builder| %>
    <%= builder.hidden_field :product_attribute_id, :value => builder.object.product_attribute.id %>
    <%= builder.label :value, builder.object.product_attribute.name %>
    <%= builder.send(builder.object.product_attribute.attr_type.to_sym, :value, eval(builder.object.product_attribute.params)) %>
<% end %>